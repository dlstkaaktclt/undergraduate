`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date: 2020/04/25 19:18:03
// Design Name: 
// Module Name: tb_my_pe_controller
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////


module tb_my_pe_controller();

parameter BRAM_ADDR_WIDTH = 5;

reg clk;
reg aresetn;
reg start;
reg [31:0] din;
wire done;
wire [BRAM_ADDR_WIDTH-1:0] rdaddr;
wire [31:0] wrdata;

reg [31:0] din_mem [0:2**BRAM_ADDR_WIDTH-1];

//random test vector generation
    initial begin
        clk<=0;
        start <= 0;
          din <= 0;  

        din_mem[0] = 32'b00111111100000000000000000000000;  //1
        din_mem[1] = 32'b01000000000000000000000000000000;  //2
        din_mem[2] = 32'b01000000010000000000000000000000;  //3
        din_mem[3] = 32'b01000000100000000000000000000000;  //4
        din_mem[4] = 32'b01000000101000000000000000000000;  //5
        din_mem[5] = 32'b01000000110000000000000000000000;  //6
        din_mem[6] = 32'b01000000111000000000000000000000;  //7
        din_mem[7] = 32'b01000001000000000000000000000000;  //8
        din_mem[8] = 32'b01000001000100000000000000000000;  //9
        din_mem[9] = 32'b01000001001000000000000000000000;  //10
        din_mem[10] = 32'b01000001001100000000000000000000;  //11
        din_mem[11] = 32'b01000001010000000000000000000000;  //12
        din_mem[12] = 32'b01000001010100000000000000000000;  //13
        din_mem[13] = 32'b01000001011000000000000000000000;  //14
        din_mem[14] = 32'b01000001011100000000000000000000;  //15
        din_mem[15] = 32'b01000001100000000000000000000000;  //16
        din_mem[16] = 32'b00111111100000000000000000000000;  //1
        din_mem[17] = 32'b01000000000000000000000000000000;  //2
        din_mem[18] = 32'b01000000010000000000000000000000;  //3
        din_mem[19] = 32'b01000000100000000000000000000000;  //4
        din_mem[20] = 32'b01000000101000000000000000000000;  //5
        din_mem[21] = 32'b01000000110000000000000000000000;  //6
        din_mem[22] = 32'b01000000111000000000000000000000;  //7
        din_mem[23] = 32'b01000001000000000000000000000000;  //8
        din_mem[24] = 32'b01000001000100000000000000000000;  //9
        din_mem[25] = 32'b01000001001000000000000000000000;  //10
        din_mem[26] = 32'b01000001001100000000000000000000;  //11
        din_mem[27] = 32'b01000001010000000000000000000000;  //12
        din_mem[28] = 32'b01000001010100000000000000000000;  //13
        din_mem[29] = 32'b01000001011000000000000000000000;  //14
        din_mem[30] = 32'b01000001011100000000000000000000;  //15
        din_mem[31] = 32'b01000001100000000000000000000000;  //16
        
        aresetn <= 0;    //reset
        
        #20;
        
        aresetn <= 1;
        start <= 1;
        
        #30;
        
        start <= 0;
        #10;
        
    end 

    always #5 clk <= ~clk;
    
    always @(posedge clk)
    din <= din_mem[rdaddr];


    my_pe_controller #(6, 6, 4 , BRAM_ADDR_WIDTH) PE_CTR (
      .start(start),
      .aclk(clk),
      .aresetn(aresetn),
      .rddata(din),
      .rdaddr(rdaddr),
      .wrdata(wrdata),
      .done(done)
    );

endmodule
